title: Compressed Folder Organization
type: text/markdown
tags: yolo training inference onnx rknn configuration documentation reference python structure docs documentation
created: 20250807170027
modified: 20250807170027
source: docs/COMPRESSED_FOLDER_ORGANIZATION.md

# Compressed Folder Organization

## ğŸ¯ **Overview**

This document describes the new compressed folder organization system that centralizes all zip files in a dedicated `compressed/` directory for better organization and maintainability.

## ğŸ“ **New Structure**

### **Compressed Folder Location:**
```
pmu-instance-sampah-fuzzy/
â”œâ”€â”€ compressed/                    # ğŸ“¦ All compressed files
â”‚   â”œâ”€â”€ datasets.zip              # Dataset files
â”‚   â”œâ”€â”€ rknn_models.zip           # RKNN model files
â”‚   â”œâ”€â”€ segment_v8n_weights.zip   # YOLOv8n weights
â”‚   â”œâ”€â”€ segment_v10n_weights.zip  # YOLOv10n weights
â”‚   â”œâ”€â”€ segment_v11n_weights.zip  # YOLOv11n weights
â”‚   â””â”€â”€ yolo*_segment_inference_results.zip # Inference results
â”œâ”€â”€ results/                      # Training results
â”œâ”€â”€ datasets/                     # Extracted datasets
â””â”€â”€ ... (other folders)
```

## ğŸ”§ **Configuration Updates**

### **config.yaml Changes:**

#### **Added Compressed Directory Configuration:**
```yaml
dataset:
  # Directory structure
  default_dataset_dir: "datasets"
  default_model_dir: "results/runs"
  default_onnx_dir: "results/onnx_models"
  default_rknn_dir: "results/rknn_models"
  default_compressed_dir: "compressed"  # NEW
  
  # Compressed files configuration
  compressed_files:
    datasets_zip: "datasets.zip"
    rknn_models_zip: "rknn_models.zip"
    weights_zip_pattern: "segment_{model_version}_weights.zip"
    inference_zip_pattern: "segment_{model_version}_inference.zip"
```

## ğŸ”„ **Module Updates**

### **1. Model Processor (`modules/model_processor.py`):**
- âœ… Updated `zip_weights_folder()` to save to `compressed/` directory
- âœ… Uses configuration for compressed directory path
- âœ… Creates directory if it doesn't exist

### **2. Dataset Manager (`modules/dataset_manager.py`):**
- âœ… Updated `zip_datasets_folder()` to save to `compressed/` directory
- âœ… Updated dataset extraction to check `compressed/` first
- âœ… Uses configuration for compressed directory path

### **3. RKNN Converter (`modules/rknn_converter.py`):**
- âœ… Updated `zip_rknn_models_folder()` to save to `compressed/` directory
- âœ… Uses configuration for compressed directory path

### **4. Inference Visualizer (`modules/inference_visualizer.py`):**
- âœ… Updated `zip_superimposed_images_folder()` to save to `compressed/` directory
- âœ… Uses configuration for compressed directory path

### **5. Drive Manager (`modules/drive_manager.py`):**
- âœ… Updated to look for zip files in `compressed/` directory
- âœ… Updated file list to include all compressed files

### **6. Fresh Start (`fresh_start.py`):**
- âœ… Updated to check `compressed/datasets.zip` first
- âœ… Falls back to root `datasets.zip` if not found

### **7. Diagnostic Scripts:**
- âœ… Updated `tests/diagnostic/extract_and_check_dataset.py`
- âœ… Updated to check `compressed/datasets.zip` first

## ğŸ“‹ **File Types Organized**

### **Dataset Files:**
- âœ… `datasets.zip` - Complete dataset archive
- âœ… `dataset.zip` - Alternative dataset archive

### **Model Files:**
- âœ… `rknn_models.zip` - RKNN model archive
- âœ… `segment_v8n_weights.zip` - YOLOv8n weights
- âœ… `segment_v10n_weights.zip` - YOLOv10n weights
- âœ… `segment_v11n_weights.zip` - YOLOv11n weights

### **Inference Results:**
- âœ… `yolo{version}_segment_inference_results.zip` - Inference visualization results

## ğŸš€ **Usage Examples**

### **Creating Compressed Files:**
```python
# Dataset compression
dataset_manager.zip_datasets_folder()

# Model weights compression
model_processor.zip_weights_folder("v8n")

# RKNN models compression
rknn_converter.zip_rknn_models_folder()

# Inference results compression
inference_visualizer.zip_superimposed_images_folder("v8n")
```

### **Extracting Compressed Files:**
```python
# Automatic extraction (checks compressed/ first)
dataset_manager.prepare_datasets()

# Manual extraction
fresh_start.extract_dataset()
```

### **Google Drive Integration:**
```python
# All compressed files automatically included
drive_manager.save_all_results_to_drive()
```

## ğŸ“Š **Benefits Achieved**

### **1. Better Organization:**
- âœ… All zip files in one location
- âœ… Clear separation from source files
- âœ… Easy to find and manage compressed files

### **2. Improved Maintainability:**
- âœ… Centralized configuration
- âœ… Consistent file naming
- âœ… Easy to extend with new file types

### **3. Enhanced Functionality:**
- âœ… Automatic directory creation
- âœ… Fallback to root directory for backward compatibility
- âœ… Configuration-driven paths

### **4. Better Documentation:**
- âœ… Clear file organization
- âœ… Consistent naming patterns
- âœ… Easy to understand structure

## ğŸ”§ **Backward Compatibility**

### **Fallback Mechanism:**
- âœ… Scripts check `compressed/` first
- âœ… Fall back to root directory if not found
- âœ… No breaking changes to existing workflows

### **Migration:**
- âœ… Existing files automatically moved to `compressed/`
- âœ… New files created in `compressed/`
- âœ… Old paths still work as fallback

## ğŸ“ **Directory Structure**

### **Before:**
```
pmu-instance-sampah-fuzzy/
â”œâ”€â”€ datasets.zip              # âŒ Scattered files
â”œâ”€â”€ rknn_models.zip           # âŒ Scattered files
â”œâ”€â”€ segment_v8n_weights.zip   # âŒ Scattered files
â””â”€â”€ ... (other files)
```

### **After:**
```
pmu-instance-sampah-fuzzy/
â”œâ”€â”€ compressed/               # âœ… Organized folder
â”‚   â”œâ”€â”€ datasets.zip
â”‚   â”œâ”€â”€ rknn_models.zip
â”‚   â”œâ”€â”€ segment_v8n_weights.zip
â”‚   â”œâ”€â”€ segment_v10n_weights.zip
â”‚   â”œâ”€â”€ segment_v11n_weights.zip
â”‚   â””â”€â”€ yolo*_segment_inference_results.zip
â”œâ”€â”€ results/                  # âœ… Clean results
â”œâ”€â”€ datasets/                 # âœ… Clean datasets
â””â”€â”€ ... (other folders)
```

## ğŸ¯ **Configuration Reference**

### **Compressed Directory Settings:**
```yaml
dataset:
  default_compressed_dir: "compressed"
  
  compressed_files:
    datasets_zip: "datasets.zip"
    rknn_models_zip: "rknn_models.zip"
    weights_zip_pattern: "segment_{model_version}_weights.zip"
    inference_zip_pattern: "segment_{model_version}_inference.zip"
```

### **Usage in Code:**
```python
# Get compressed directory from config
compressed_dir = config.get('dataset', {}).get('default_compressed_dir', 'compressed')
os.makedirs(compressed_dir, exist_ok=True)

# Create zip file in compressed directory
output_filename = os.path.join(compressed_dir, "filename")
shutil.make_archive(output_filename, 'zip', source_folder)
```

## ğŸ‰ **Result**

The compressed folder organization provides:

1. **ğŸ¯ Better Organization** - All zip files in one location
2. **ğŸ“š Improved Documentation** - Clear structure and naming
3. **ğŸ”§ Enhanced Maintainability** - Configuration-driven paths
4. **ğŸš€ Backward Compatibility** - No breaking changes
5. **ğŸ“¦ Clean Root Directory** - No scattered zip files

The project now has a professional, organized structure for all compressed files! ğŸ‰ 
