title: Compressed Folder Organization
type: text/markdown
tags: yolo training inference onnx rknn configuration documentation reference python structure docs documentation
created: 20250807170027
modified: 20250807170027
source: docs/COMPRESSED_FOLDER_ORGANIZATION.md

# Compressed Folder Organization

## 🎯 **Overview**

This document describes the new compressed folder organization system that centralizes all zip files in a dedicated `compressed/` directory for better organization and maintainability.

## 📁 **New Structure**

### **Compressed Folder Location:**
```
pmu-instance-sampah-fuzzy/
├── compressed/                    # 📦 All compressed files
│   ├── datasets.zip              # Dataset files
│   ├── rknn_models.zip           # RKNN model files
│   ├── segment_v8n_weights.zip   # YOLOv8n weights
│   ├── segment_v10n_weights.zip  # YOLOv10n weights
│   ├── segment_v11n_weights.zip  # YOLOv11n weights
│   └── yolo*_segment_inference_results.zip # Inference results
├── results/                      # Training results
├── datasets/                     # Extracted datasets
└── ... (other folders)
```

## 🔧 **Configuration Updates**

### **config.yaml Changes:**

#### **Added Compressed Directory Configuration:**
```yaml
dataset:
  # Directory structure
  default_dataset_dir: "datasets"
  default_model_dir: "results/runs"
  default_onnx_dir: "results/onnx_models"
  default_rknn_dir: "results/rknn_models"
  default_compressed_dir: "compressed"  # NEW
  
  # Compressed files configuration
  compressed_files:
    datasets_zip: "datasets.zip"
    rknn_models_zip: "rknn_models.zip"
    weights_zip_pattern: "segment_{model_version}_weights.zip"
    inference_zip_pattern: "segment_{model_version}_inference.zip"
```

## 🔄 **Module Updates**

### **1. Model Processor (`modules/model_processor.py`):**
- ✅ Updated `zip_weights_folder()` to save to `compressed/` directory
- ✅ Uses configuration for compressed directory path
- ✅ Creates directory if it doesn't exist

### **2. Dataset Manager (`modules/dataset_manager.py`):**
- ✅ Updated `zip_datasets_folder()` to save to `compressed/` directory
- ✅ Updated dataset extraction to check `compressed/` first
- ✅ Uses configuration for compressed directory path

### **3. RKNN Converter (`modules/rknn_converter.py`):**
- ✅ Updated `zip_rknn_models_folder()` to save to `compressed/` directory
- ✅ Uses configuration for compressed directory path

### **4. Inference Visualizer (`modules/inference_visualizer.py`):**
- ✅ Updated `zip_superimposed_images_folder()` to save to `compressed/` directory
- ✅ Uses configuration for compressed directory path

### **5. Drive Manager (`modules/drive_manager.py`):**
- ✅ Updated to look for zip files in `compressed/` directory
- ✅ Updated file list to include all compressed files

### **6. Fresh Start (`fresh_start.py`):**
- ✅ Updated to check `compressed/datasets.zip` first
- ✅ Falls back to root `datasets.zip` if not found

### **7. Diagnostic Scripts:**
- ✅ Updated `tests/diagnostic/extract_and_check_dataset.py`
- ✅ Updated to check `compressed/datasets.zip` first

## 📋 **File Types Organized**

### **Dataset Files:**
- ✅ `datasets.zip` - Complete dataset archive
- ✅ `dataset.zip` - Alternative dataset archive

### **Model Files:**
- ✅ `rknn_models.zip` - RKNN model archive
- ✅ `segment_v8n_weights.zip` - YOLOv8n weights
- ✅ `segment_v10n_weights.zip` - YOLOv10n weights
- ✅ `segment_v11n_weights.zip` - YOLOv11n weights

### **Inference Results:**
- ✅ `yolo{version}_segment_inference_results.zip` - Inference visualization results

## 🚀 **Usage Examples**

### **Creating Compressed Files:**
```python
# Dataset compression
dataset_manager.zip_datasets_folder()

# Model weights compression
model_processor.zip_weights_folder("v8n")

# RKNN models compression
rknn_converter.zip_rknn_models_folder()

# Inference results compression
inference_visualizer.zip_superimposed_images_folder("v8n")
```

### **Extracting Compressed Files:**
```python
# Automatic extraction (checks compressed/ first)
dataset_manager.prepare_datasets()

# Manual extraction
fresh_start.extract_dataset()
```

### **Google Drive Integration:**
```python
# All compressed files automatically included
drive_manager.save_all_results_to_drive()
```

## 📊 **Benefits Achieved**

### **1. Better Organization:**
- ✅ All zip files in one location
- ✅ Clear separation from source files
- ✅ Easy to find and manage compressed files

### **2. Improved Maintainability:**
- ✅ Centralized configuration
- ✅ Consistent file naming
- ✅ Easy to extend with new file types

### **3. Enhanced Functionality:**
- ✅ Automatic directory creation
- ✅ Fallback to root directory for backward compatibility
- ✅ Configuration-driven paths

### **4. Better Documentation:**
- ✅ Clear file organization
- ✅ Consistent naming patterns
- ✅ Easy to understand structure

## 🔧 **Backward Compatibility**

### **Fallback Mechanism:**
- ✅ Scripts check `compressed/` first
- ✅ Fall back to root directory if not found
- ✅ No breaking changes to existing workflows

### **Migration:**
- ✅ Existing files automatically moved to `compressed/`
- ✅ New files created in `compressed/`
- ✅ Old paths still work as fallback

## 📁 **Directory Structure**

### **Before:**
```
pmu-instance-sampah-fuzzy/
├── datasets.zip              # ❌ Scattered files
├── rknn_models.zip           # ❌ Scattered files
├── segment_v8n_weights.zip   # ❌ Scattered files
└── ... (other files)
```

### **After:**
```
pmu-instance-sampah-fuzzy/
├── compressed/               # ✅ Organized folder
│   ├── datasets.zip
│   ├── rknn_models.zip
│   ├── segment_v8n_weights.zip
│   ├── segment_v10n_weights.zip
│   ├── segment_v11n_weights.zip
│   └── yolo*_segment_inference_results.zip
├── results/                  # ✅ Clean results
├── datasets/                 # ✅ Clean datasets
└── ... (other folders)
```

## 🎯 **Configuration Reference**

### **Compressed Directory Settings:**
```yaml
dataset:
  default_compressed_dir: "compressed"
  
  compressed_files:
    datasets_zip: "datasets.zip"
    rknn_models_zip: "rknn_models.zip"
    weights_zip_pattern: "segment_{model_version}_weights.zip"
    inference_zip_pattern: "segment_{model_version}_inference.zip"
```

### **Usage in Code:**
```python
# Get compressed directory from config
compressed_dir = config.get('dataset', {}).get('default_compressed_dir', 'compressed')
os.makedirs(compressed_dir, exist_ok=True)

# Create zip file in compressed directory
output_filename = os.path.join(compressed_dir, "filename")
shutil.make_archive(output_filename, 'zip', source_folder)
```

## 🎉 **Result**

The compressed folder organization provides:

1. **🎯 Better Organization** - All zip files in one location
2. **📚 Improved Documentation** - Clear structure and naming
3. **🔧 Enhanced Maintainability** - Configuration-driven paths
4. **🚀 Backward Compatibility** - No breaking changes
5. **📦 Clean Root Directory** - No scattered zip files

The project now has a professional, organized structure for all compressed files! 🎉 
